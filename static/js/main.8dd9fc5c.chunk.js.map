{"version":3,"sources":["routes.js","components/Loading.js","components/confirm.js","components/index.js","App.js","serviceWorker.js","index.js","history.js","reducers.js","store.js","actions.js","token.js","termquery.js","filterPersistence.js","saga.js","utils.js","api.js"],"names":["routes","path","name","component","React","lazy","exact","resolvePath","routeName","warning","indexOf","route","find","t","toLowerCase","matchRoute","location","result","results","match","matchPath","pathname","push","matchRoutes","length","loading","className","Confirm","title","content","okLabel","cancelLabel","apply","container","useState","isOpen","setIsOpen","close","toggle","useEffect","unmountComponentAtNode","parentNode","removeChild","color","onClick","Promise","resolve","fn","args","Array","isArray","slice","isGeneratorFunction","store","runSaga","call","then","confirm","props","document","createElement","body","appendChild","render","DefaultLayout","Login","Register","Page401","Page404","Page500","App","Component","Suspense","fallback","Boolean","window","hostname","rootSaga","ReactDOM","Provider","value","history","getElementById","navigator","serviceWorker","ready","registration","unregister","createBrowserHistory","basename","GlobalState","Immutable","Record","currentUser","undefined","cache","Map","commonReducer","handleActions","setCurrentUser","state","action","user","Object","assign","payload","avatar","gravatarURL","email","set","setCache","key","combineReducers","common","router","connectRouter","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","sagaMiddleware","createSagaMiddleware","rootReducer","createRootReducer","initialState","type","createStore","applyMiddleware","routerMiddleware","run","dispatch","END","configureStore","createAction","listeners","localStorage","getItem","token","this","setItem","removeItem","i","listener","subscribe","Error","isSubscribed","index","splice","isWord","s","relationMap","_","mapValues","translated_as","label","definition","reverseEdge","definition_of","in","related","synonym","antonym","rel","count","KIND","concat","keys","TAG","TERM_BODY","FILE_BODY","makeTermQuery","kind","termUid","offset","limit","lang","searchString","tags","onlyTags","includes","hasTermType","matchFn","isTermList","isTerm","hasTagType","params","range","termRange","searchFilter","str","trim","useRegexp","$searchString","$regexp","exprs","filter","join","makeSearchFilter","filterExpr","isEmpty","map","uid","termFilter","k","paramQuery","fileEdges","allEdgeKeys","edges","isFile","myrange","makeTotal","pred","totals","text","replace","persistFilters","take","a","LOCATION_CHANGE","CALL_HISTORY_METHOD","navigate","put","login","username","password","onError","api","role","err","logout","tokenStore","autoLogin","spawn","MD5_REGEX","size","hash","md5","obj","constructor","displayName","isFunction","next","throw","isGenerator","prototype","createAbortError","message","DOMException","e","delay","milliSeconds","abortController","reject","id","setTimeout","signal","removeEventListener","clearTimeout","addEventListener","DEFAULT_LIMIT","extractErrorMessage","data","isString","error","error_message","async","resp","axios","url","method","auth","me","makeAxiosConfig","options","abortable","AbortController","listen","abort","source","cancel","cancelToken","makeCancelConfig","get","config","del","query","queryString","formatNquad","wrapId","v","startsWith","format","subject","predicate","object","some","isObject","formatNquads","updateGraph","delete","paginationParams","qs","defaultLimit","URLSearchParams","page","parseInt","isNaN","getList","append","headers","loadProgressBar","request","use","response","status","endsWith","alert","list","tag","update","updateObjectTags","oldTags","newTags","removedTags","q","term","create","post","terms","getAudio","items","audio","total","termId","encodeURIComponent","unlinkRelated","edge","linkRelated","toggleTagType","isTag","e1","file","unlink","unlinkVisual","visual","admin","searchAudio","decodeURIComponent","userId","currentUrls","Set","mp3","has","now","Date","toISOString","src","URL"],"mappings":"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","file":"static/js/main.8dd9fc5c.chunk.js","sourcesContent":["import React from 'react';\nimport warning from 'warning';\nimport { matchPath } from 'react-router-dom';\n\nconst Dashboard = React.lazy(() => import('./pages/Dashboard/Dashboard'));\nconst Users = React.lazy(() => import('./pages/Users/Users'));\nconst User = React.lazy(() => import('./pages/Users/User'));\nconst Terms = React.lazy(() => import('./pages/Terms/Terms'));\nconst Term = React.lazy(() => import('./pages/Terms/Term'));\n\n// https://github.com/ReactTraining/react-router/tree/master/packages/react-router-config\nconst routes = [\n  { path: '/dashboard', name: 'Dashboard', component: Dashboard },\n  { path: '/users', exact: true, name: 'Users', component: Users },\n  { path: '/users/:id', exact: true, name: 'User Details', component: User },\n  { path: '/terms', exact: true, name: 'Terms', component: Terms },\n  { path: '/terms/:id', exact: true, name: 'Term Details', component: Term },\n];\n\nexport function resolvePath(routeName) {\n  warning(!!routeName, 'route name is not defined');\n\n  if (routeName.indexOf('/') >= 0) {\n    return routeName;\n  }\n\n  const route = routes.find(t => t.name.toLowerCase() === routeName.toLowerCase());\n  if (!route) {\n    warning(false, `bad route name ${routeName}`);\n    return undefined;\n  }\n\n  return route.path;\n}\n\nexport function matchRoutes(location) {\n  const results = [];\n  for (const route of routes) {\n    const match = matchPath(location.pathname, route);\n    if (!match) continue;\n    const result = { ...match, route };\n    if (match.exact) {\n      return [result];\n    }\n    results.push(result);\n  }\n  return results;\n}\n\nexport function matchRoute(location) {\n  const result = matchRoutes(location);\n  if (result.length > 0) {\n    return result[0];\n  }\n  return undefined;\n}\n\nexport default routes;\n","import React from 'react';\n\nconst loading = () => <div className=\"animated fadeIn pt-1 text-center\">Loading...</div>;\n\nexport default loading;\n","import React, { useState, useEffect } from 'react';\nimport { render, unmountComponentAtNode } from 'react-dom';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { call } from 'redux-saga/effects';\nimport { isGeneratorFunction } from 'utils';\nimport store from '../store';\n\nconst Confirm = ({ className, title, content, okLabel, cancelLabel, apply, container }) => {\n  const [isOpen, setIsOpen] = useState(true);\n  const close = () => setIsOpen(false);\n  const toggle = () => setIsOpen(!isOpen);\n\n  const handleOk = () => {\n    new Promise(resolve => {\n      let fn = apply;\n      let args = [];\n      if (Array.isArray(apply)) {\n        fn = apply[0];\n        args = apply.slice(1);\n      }\n      if (isGeneratorFunction(fn)) {\n        store.runSaga(function*() {\n          const result = yield call(fn, ...args);\n          resolve(result);\n        });\n      } else {\n        resolve(fn(...args));\n      }\n    }).then(close);\n  };\n\n  useEffect(() => {\n    return () => {\n      if (container) {\n        unmountComponentAtNode(container);\n      }\n      if (container && container.parentNode) {\n        container.parentNode.removeChild(container);\n      }\n    };\n  });\n\n  return (\n    <Modal isOpen={isOpen} toggle={toggle} className={className}>\n      <ModalHeader toggle={toggle}>{title || 'Confirmation'}</ModalHeader>\n      <ModalBody>{content}</ModalBody>\n      <ModalFooter>\n        <Button color=\"primary\" onClick={handleOk}>\n          {okLabel || 'OK'}\n        </Button>\n        &nbsp;\n        <Button color=\"secondary\" onClick={toggle}>\n          {cancelLabel || 'Cancel'}\n        </Button>\n      </ModalFooter>\n    </Modal>\n  );\n};\n\nexport function confirm(props) {\n  const container = document.createElement('div');\n  document.body.appendChild(container);\n  render(<Confirm {...props} container={container} />, container);\n}\n","export { confirm } from './confirm';\n","import React, { Component } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport loading from './components/Loading';\nimport './App.scss';\n\n// Containers\nconst DefaultLayout = React.lazy(() => import('./containers/DefaultLayout'));\n\n// Pages\nconst Login = React.lazy(() => import('./pages/Login/Login'));\nconst Register = React.lazy(() => import('./pages/Register/Register'));\nconst Page401 = React.lazy(() => import('./pages/Page401/Page401'));\nconst Page404 = React.lazy(() => import('./pages/Page404/Page404'));\nconst Page500 = React.lazy(() => import('./pages/Page500/Page500'));\n\nclass App extends Component {\n  render() {\n    return (\n      <div>\n        <React.Suspense fallback={loading()}>\n          <Switch>\n            <Route exact path=\"/login\" name=\"login\" component={Login} />\n            <Route exact path=\"/register\" name=\"register\" component={Register} />\n            <Route exact path=\"/401\" name=\"401\" component={Page401} />\n            <Route exact path=\"/404\" name=\"404\" component={Page404} />\n            <Route exact path=\"/500\" name=\"500\" component={Page500} />\n            <Route path=\"/\" name=\"Home\" component={DefaultLayout} />\n          </Switch>\n        </React.Suspense>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ',\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (response.status === 404 || response.headers.get('content-type').indexOf('javascript') === -1) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import './polyfill';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { StoreContext } from 'redux-react-hook';\nimport { ConnectedRouter } from 'connected-react-router';\nimport './index.scss';\nimport { history } from './history';\nimport store from './store';\nimport { rootSaga } from './saga';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nstore.runSaga(rootSaga);\n\nReactDOM.render(\n  <Provider store={store}>\n    <StoreContext.Provider value={store}>\n      <ConnectedRouter history={history}>\n        <App />\n      </ConnectedRouter>\n    </StoreContext.Provider>\n  </Provider>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { createBrowserHistory } from 'history';\n\nexport const history = createBrowserHistory({ basename: '/admin' });\n","import Immutable from 'immutable';\nimport { combineReducers } from 'redux';\nimport { handleActions } from 'redux-actions';\nimport { connectRouter } from 'connected-react-router';\nimport { setCache, setCurrentUser } from './actions';\nimport { gravatarURL } from 'utils';\n\nconst GlobalState = Immutable.Record({\n  currentUser: undefined,\n  cache: new Immutable.Map(),\n});\n\nconst commonReducer = handleActions(\n  {\n    [setCurrentUser]: (state, action) => {\n      const user = Object.assign({}, action.payload);\n      if (!user.avatar) {\n        user.avatar = gravatarURL(user.email);\n      }\n      return state.set('currentUser', user);\n    },\n    [setCache]: (state, { payload: { key, value } }) => {\n      const cache = state.cache.set(key, value);\n      return state.set('cache', cache);\n    },\n  },\n  GlobalState(),\n);\n\nexport default history =>\n  combineReducers({\n    common: commonReducer,\n    router: connectRouter(history),\n  });\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport createSagaMiddleware, { END } from 'redux-saga';\nimport { routerMiddleware } from 'connected-react-router';\nimport createRootReducer from './reducers';\nimport { history } from './history';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport function configureStore() {\n  const sagaMiddleware = createSagaMiddleware();\n  const rootReducer = createRootReducer(history);\n  const initialState = rootReducer({}, { type: '@@INIT' });\n  const store = createStore(\n    rootReducer,\n    initialState,\n    composeEnhancers(applyMiddleware(sagaMiddleware, routerMiddleware(history))),\n  );\n\n  store.runSaga = sagaMiddleware.run;\n  store.close = () => store.dispatch(END);\n\n  if (module.hot) {\n    module.hot.accept('./reducers', () => {\n      store.replaceReducer(createRootReducer(history));\n    });\n  }\n\n  return store;\n}\n\nconst store = configureStore();\n\nexport default store;\n","import { createAction } from 'redux-actions';\n\nexport const setCurrentUser = createAction('SET_CURRENT_USER');\nexport const setCache = createAction('SET_CACHE');\n","class TokenStore {\n  listeners = [];\n\n  get value() {\n    return localStorage.getItem('access_token');\n  }\n\n  set value(token) {\n    if (this.value === token) {\n      return;\n    }\n    if (token) {\n      localStorage.setItem('access_token', token);\n    } else {\n      localStorage.removeItem('access_token');\n    }\n\n    for (let i = 0; i < this.listeners.length; i++) {\n      const listener = this.listeners[i];\n      listener(token);\n    }\n  }\n\n  subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    let isSubscribed = true;\n\n    this.listeners.push(listener);\n\n    return () => {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n\n      const index = this.listeners.indexOf(listener);\n      this.listeners.splice(index, 1);\n    };\n  }\n}\n\nconst store = new TokenStore();\n\nexport default store;\n","import _ from 'lodash';\n\nconst isWord = s => s && s.match(/^[^\\s]+$/);\n\nexport const relationMap = _.mapValues(\n  {\n    translated_as: {\n      label: 'Translations',\n    },\n    definition: {\n      label: 'Definitions',\n      reverseEdge: 'definition_of',\n    },\n    definition_of: {\n      label: 'Definition for',\n    },\n    in: {\n      label: 'Used in',\n    },\n    related: {\n      label: 'Related Terms',\n    },\n    synonym: {\n      label: 'Synonyms',\n    },\n    antonym: {\n      label: 'Antonyms',\n    },\n  },\n  (rel, name) => ({\n    ...rel,\n    count: `${name}_count`,\n  }),\n);\n\nconst KIND = ['term', 'terms', 'audio', 'visual'].concat(Object.keys(relationMap));\n\nconst TAG = `tag {\n        uid\n        text\n        lang\n        transcript@ru\n        transcript@en\n      }`;\n\nconst TERM_BODY = `{\n    uid\n    text\n    lang\n    transcript@ru\n    transcript@en\n    created_at\n    created_by {\n      uid\n      name\n    }\n    ${TAG}\n  }`;\n\nconst FILE_BODY = `{\n    uid\n    url\n    source\n    content_type\n    views: count(see)\n    likes: count(like)\n    dislikes: count(dislike)\n    created_at\n    created_by {\n      uid\n      name\n    }\n    ${TAG}\n  }`;\n\nexport function makeTermQuery({\n  kind = 'terms',\n  termUid,\n  offset = 0,\n  limit = 10,\n  lang,\n  searchString,\n  tags,\n  onlyTags = false,\n}) {\n  if (!kind || !KIND.includes(kind)) {\n    throw new Error(`invalid kind ${kind}`);\n  }\n  if (kind === 'term' && !termUid) {\n    throw new Error('termUid is required');\n  }\n\n  const hasTermType = 'has(Term)';\n  const matchFn = termUid ? `uid(${termUid})` : hasTermType;\n  const isTermList = kind === 'terms';\n  const isTerm = kind === 'term';\n  const hasTagType = isTermList && onlyTags ? 'has(Tag)' : '';\n  const params = {};\n\n  function makeSearchFilter() {\n    if (!isTermList) {\n      return '';\n    }\n\n    const str = (searchString || '').trim();\n    if (!str) {\n      return '';\n    }\n\n    // too small word fails with 'regular expression is too wide-ranging and can't be executed efficiently'\n    const useRegexp = isWord(str) && str.length >= 3;\n\n    params.$searchString = str;\n\n    if (useRegexp) {\n      params.$regexp = `${str}.*`;\n    }\n\n    const regexp = useRegexp ? `regexp(text, /$regexp/i)` : '';\n    const anyoftext = `anyoftext(text, $searchString)`;\n    const exprs = [anyoftext, regexp].filter(s => !!s);\n    if (exprs.length > 1) {\n      return `(${exprs.join(' or ')})`;\n    }\n    return exprs[0];\n  }\n\n  const range = `offset: ${offset}, first: ${limit}`;\n  const termRange = isTermList ? `, ${range}` : '';\n\n  const brace = s => `(${s})`;\n  const searchFilter = makeSearchFilter();\n  const langFilter = lang ? `eq(lang, \"${lang}\")` : '';\n  const tagFilter = !_.isEmpty(tags) ? brace(tags.map(t => `uid_in(tag, ${t.uid})`).join(' or ')) : '';\n\n  const filterExpr = [hasTermType, hasTagType, langFilter, tagFilter, searchFilter].filter(s => !!s).join(' and ');\n  const termFilter = isTermList ? `@filter(${filterExpr})` : '';\n\n  const args = _.keys(params)\n    .map(k => `${k}: string`)\n    .join();\n  const paramQuery = args ? `query terms(${args}) ` : '';\n\n  const fileEdges = ['audio', 'visual'];\n  const makeEdge = name => {\n    const isFile = fileEdges.includes(name);\n    const myrange = kind === name ? `(${range})` : '(first: 10)';\n    const body = isFile ? FILE_BODY : TERM_BODY;\n    return `${name} ${myrange} ${body}`;\n  };\n\n  const allEdgeKeys = Object.keys(relationMap).concat(fileEdges);\n  const edges = allEdgeKeys.map(makeEdge).join('\\n');\n\n  const makeTotal = (pred, name) => {\n    if (!name) {\n      name = `${pred}_count`;\n    }\n    return `${name}: count(${pred})`;\n  };\n  const totals = isTerm ? allEdgeKeys.map(k => makeTotal(k)).join('\\n') : '';\n\n  const text = `${paramQuery}{\n    terms(func: ${matchFn}${termRange}) ${termFilter} {\n      Tag\n      uid\n      text\n      lang\n      transcript@ru\n      transcript@en\n      created_at\n      created_by {\n        uid\n        name\n      }\n      tag {\n        uid\n        text\n        lang\n        transcript@ru\n        transcript@en\n      }\n      ${edges}\n    }\n    count(func: ${matchFn}) ${termFilter} {\n      ${isTerm ? '' : makeTotal(isTermList ? 'uid' : kind, 'total')}\n      ${totals}\n    }\n  }`;\n\n  return {\n    text: text.replace(/^\\s*[\\r\\n]/gm, ''),\n    params,\n  };\n}\n","import { take } from 'redux-saga/effects';\nimport { LOCATION_CHANGE, CALL_HISTORY_METHOD } from 'connected-react-router';\n\nexport function* persistFilters() {\n  while (true) {\n    const action = yield take(a => a.type === LOCATION_CHANGE || a.type === CALL_HISTORY_METHOD);\n    // if page is not changed save query string for given path\n    // on page change without query string restore previous query string\n  }\n}\n","import { spawn, call, put } from 'redux-saga/effects';\nimport { push } from 'connected-react-router';\nimport * as api from './api';\nimport { setCurrentUser } from './actions';\nimport { resolvePath } from './routes';\nimport tokenStore from './token';\nimport { persistFilters } from './filterPersistence';\n\nexport function* navigate(routeName) {\n  const path = resolvePath(routeName);\n  if (path) {\n    yield put(push(path));\n  }\n}\n\nexport function* login(username, password, onError) {\n  try {\n    const user = yield call(api.login, username, password);\n    const isAdmin = (user.role || '').indexOf('admin') >= 0;\n    if (isAdmin) {\n      yield put(setCurrentUser(user));\n      // TODO nagivate to previous page\n      yield call(navigate, '/');\n    } else {\n      yield call(navigate, '/401');\n    }\n  } catch (err) {\n    onError(err);\n  }\n}\n\nexport function* logout() {\n  tokenStore.value = '';\n  yield call(navigate, '/login');\n}\n\nexport function* autoLogin() {\n  try {\n    const user = yield call(api.me);\n    yield put(setCurrentUser(user));\n  } catch (err) {\n    yield call(navigate, '/login');\n  }\n}\n\nexport function* rootSaga() {\n  yield spawn(autoLogin);\n  yield spawn(persistFilters);\n}\n","import { isFunction } from 'lodash';\nimport md5 from 'md5';\n\nconst MD5_REGEX = /^[0-9a-f]{32}$/;\n\nexport function gravatarURL(email, size = 80) {\n  if (!email) return undefined;\n  email = email.trim().toLowerCase();\n  const hash = email.match(MD5_REGEX) ? email : md5(email);\n  return `https://www.gravatar.com/avatar/${hash}.jpg?s=${size}&d=mp`;\n}\n\nexport function isIterable(obj) {\n  return obj && typeof obj !== 'string' && obj[Symbol.iterator];\n}\n\nexport function isGenerator(obj) {\n  return isFunction(obj.next) && isFunction(obj.throw);\n}\n\nexport function isGeneratorFunction(obj) {\n  const constructor = obj.constructor;\n  if (!constructor) {\n    return false;\n  }\n  if ('GeneratorFunction' === constructor.name || 'GeneratorFunction' === constructor.displayName) {\n    return true;\n  }\n  return isGenerator(constructor.prototype);\n}\n\nconst createAbortError = message => {\n  try {\n    return new DOMException(message, 'AbortError');\n  } catch (e) {\n    const err = new Error(message);\n    err.name = 'AbortError';\n    return err;\n  }\n};\n\nexport function delay(milliSeconds, abortController = undefined) {\n  return new Promise((resolve, reject) => {\n    const id = setTimeout(() => {\n      resolve(true);\n    }, milliSeconds);\n    if (abortController) {\n      const listener = () => {\n        abortController.signal.removeEventListener('abort', listener);\n        clearTimeout(id);\n        reject(createAbortError('timer aborted'));\n      };\n      abortController.signal.addEventListener('abort', listener);\n    }\n  });\n}\n","import _ from 'lodash';\nimport * as axios from 'axios';\nimport { loadProgressBar } from 'axios-progress-bar';\nimport 'nprogress/nprogress.css';\nimport { confirm } from 'components';\nimport { navigate } from 'saga';\nimport store from 'store';\nimport token from './token';\nimport { history } from './history';\nimport { makeTermQuery, relationMap } from './termquery';\n\nexport const DEFAULT_LIMIT = 11;\n\naxios.defaults.headers.common['Accept'] = 'application/json';\naxios.defaults.headers.common['Content-Type'] = 'application/json';\n\nloadProgressBar();\n\nfunction extractErrorMessage(data) {\n  return _.isString(data) ? data : data.error || data.error_message;\n}\n\nfunction handleApiError(error) {\n  const status = _.get(error, 'response.status');\n  if (401 === status) {\n    if (!window.location.pathname.endsWith('/login')) {\n      confirm({\n        title: 'Session Expired',\n        content: 'Your session has expired. Would you like to be redirected to the login page?',\n        warning: true,\n        okLabel: 'Yes',\n        cancelLabel: 'No',\n        apply: [navigate, '/login'],\n      });\n    } else {\n      throw new Error(extractErrorMessage(error.response.data));\n    }\n  } else if (404 === status) {\n    store.runSaga(navigate, '/404');\n  } else if (status >= 500) {\n    alert(extractErrorMessage(error.response.data));\n  } else {\n    return Promise.reject(error);\n  }\n}\n\naxios.interceptors.request.use(config => {\n  if (token.value && !config.auth) {\n    config.headers['Authorization'] = `Bearer ${token.value}`;\n  }\n  return config;\n});\n\naxios.interceptors.response.use(response => {\n  return response;\n}, handleApiError);\n\nexport async function login(username, password) {\n  const resp = await axios({\n    url: '/api/login',\n    method: 'POST',\n    auth: { username, password },\n  });\n  token.value = resp.data.token;\n  return me();\n}\n\nfunction makeCancelConfig(abortController) {\n  if (!abortController) {\n    const path = history.location.pathname;\n\n    abortController = new AbortController();\n\n    history.listen(location => {\n      if (location.pathname !== path) {\n        abortController.abort();\n      }\n    });\n  }\n\n  const source = axios.CancelToken.source();\n\n  abortController.signal.addEventListener('abort', () => {\n    source.cancel('canceled');\n  });\n\n  return {\n    cancelToken: source.token,\n  };\n}\n\nfunction makeAxiosConfig(options = {}, abortable = true) {\n  const { abortController, ...axiosConfig } = options;\n  return {\n    ...axiosConfig,\n    ...(abortable ? makeCancelConfig(abortController) : {}),\n  };\n}\n\nexport function get(path, params = {}, options = {}) {\n  const config = makeAxiosConfig(options);\n  return axios.get(path, { params, ...config }).then(resp => resp.data);\n}\n\nexport function post(path, data, options = {}) {\n  const config = makeAxiosConfig(options);\n  return axios.post(path, data, config).then(resp => resp.data);\n}\n\nexport function put(path, data, options = {}) {\n  const config = makeAxiosConfig(options);\n  return axios.put(path, data, config).then(resp => resp.data);\n}\n\nexport function del(path, options = {}) {\n  const config = makeAxiosConfig(options, false);\n  return axios.delete(path, { ...config });\n}\n\nexport function query(queryString, params = {}, options = {}) {\n  const config = makeAxiosConfig(options);\n  return axios.post('/api/query', queryString, { params, ...config }).then(resp => resp.data);\n}\n\nfunction formatNquad(value) {\n  if (_.isString(value)) {\n    return value;\n  }\n\n  const wrapId = v => (v.startsWith('0x') ? `<${v}>` : v);\n  const format = (subject, predicate, object) => `${wrapId(subject)} <${predicate}> ${wrapId(object)} .`;\n\n  if (_.isArray(value)) {\n    if (value.length !== 3 || value.some(s => !s)) {\n      throw new Error('unexpected nquad array');\n    }\n    return format(value[0], value[1], value[2]);\n  }\n\n  if (_.isObject(value)) {\n    if (!value.subject || !value.predicate || !value.object) {\n      throw new Error('invalid nquad object');\n    }\n    return format(value.subject, value.predicate, value.object);\n  }\n\n  throw new Error('unexpected nquad value');\n}\n\nfunction formatNquads(value) {\n  if (!value) {\n    return undefined;\n  }\n  if (_.isString(value)) {\n    return value;\n  }\n  if (!_.isArray(value)) {\n    throw new Error('unexpected value');\n  }\n  return value.map(formatNquad).join('\\n');\n}\n\nexport function updateGraph(set, del, options = {}, abortable = true) {\n  const data = {\n    set: formatNquads(set),\n    delete: formatNquads(del),\n  };\n  if (!data.set && !data.delete) {\n    throw new Error('please specify set or delete mutations');\n  }\n  const config = makeAxiosConfig(options, abortable);\n  return axios.post('/api/nquads', data, config).then(resp => resp.data);\n}\n\nexport function me() {\n  return get('/api/me');\n}\n\nexport function paginationParams(qs, defaultLimit = DEFAULT_LIMIT) {\n  const params = new URLSearchParams(qs);\n  const page = parseInt(params.get('page'), 10);\n  const limit = parseInt(params.get('limit'), 10);\n  return {\n    page: isNaN(page) || page <= 0 ? 1 : page,\n    limit: isNaN(limit) || limit <= 0 ? defaultLimit : page,\n  };\n}\n\nexport function getList(path, { abortController, page = 1, limit = DEFAULT_LIMIT }) {\n  const offset = (page - 1) * limit;\n  const params = new URLSearchParams();\n  params.append('offset', offset);\n  params.append('limit', limit);\n  return get(path, params, { abortController });\n}\n\nexport const user = {\n  get({ id, abortController }) {\n    return get(`/api/data/user/${id}`, {}, { abortController });\n  },\n  list({ abortController, page = 1, limit = DEFAULT_LIMIT }) {\n    return getList('/api/data/user/list', { abortController, page, limit });\n  },\n};\n\nexport const tag = {\n  get({ id, abortController }) {\n    return get(`/api/data/tag/${id}`, {}, { abortController });\n  },\n  list({ abortController, page = 1, limit = DEFAULT_LIMIT }) {\n    return getList('/api/data/tag/list', { abortController, page, limit });\n  },\n  update({ id, data, abortController }) {\n    return put(`/api/data/tag/${id}`, data, { abortController });\n  },\n  updateObjectTags({ id, oldTags = [], newTags = [], abortController }) {\n    const removedTags = oldTags.filter(t => !newTags.some(q => q.uid === t.uid));\n    const addedTags = newTags.filter(t => !oldTags.some(q => q.uid === t.uid));\n    const set = addedTags.map(t => [id, 'tag', t.uid]);\n    const del = removedTags.map(t => [id, 'tag', t.uid]);\n    return updateGraph(set, del, { abortController });\n  },\n};\n\nexport const term = {\n  create({ data, abortController }) {\n    return post('/api/data/term', data, { abortController });\n  },\n\n  get({ id, abortController }) {\n    const q = makeTermQuery({ kind: 'term', termUid: id });\n    return query(q.text, q.params, { abortController }).then(data => {\n      const term = data.terms[0];\n      if (!term) {\n        return null;\n      }\n      Object.assign(term, data.count[0]);\n      return term;\n    });\n  },\n\n  getAudio({ id, abortController, offset = 0, limit = DEFAULT_LIMIT }) {\n    const q = makeTermQuery({ kind: 'audio', termUid: id, offset, limit });\n    return query(q.text, q.params, { abortController }).then(data => {\n      const term = data.terms[0];\n      if (!term) {\n        return null;\n      }\n      return {\n        items: term.audio,\n        total: data.count[0].total,\n      };\n    });\n  },\n\n  list({\n    abortController,\n    termId,\n    kind = 'terms',\n    page = 1,\n    limit = DEFAULT_LIMIT,\n    lang,\n    searchString,\n    tags,\n    onlyTags = false,\n  }) {\n    const offset = (page - 1) * limit;\n    const q = makeTermQuery({ kind, termUid: termId, offset, limit, lang, searchString, tags, onlyTags });\n    return query(q.text, q.params, { abortController }).then(data => ({\n      items: data.terms,\n      total: data.count[0].total,\n      page,\n      limit,\n    }));\n  },\n\n  update({ id, data, abortController }) {\n    return put(`/api/data/term/${id}`, data, { abortController });\n  },\n\n  async addVisualURL({ id, url, abortController }) {\n    const obj = await get(`/api/fileproxy/?url=${encodeURIComponent(url)}&remote=true`, {}, { abortController });\n    const set = [[id, 'visual', obj.uid]];\n    await updateGraph(set, undefined, { abortController });\n    return await get(`/api/data/term/${id}`);\n  },\n\n  unlinkRelated({ termId, id, edge }) {\n    const rel = relationMap[edge];\n    const e1 = [termId, edge, id];\n    const e2 = [id, rel.reverseEdge || edge, termId];\n    return updateGraph(undefined, [e1, e2], {}, false);\n  },\n\n  linkRelated({ termId, id, edge }) {\n    const rel = relationMap[edge];\n    const e1 = [termId, edge, id];\n    const e2 = [id, rel.reverseEdge || edge, termId];\n    return updateGraph([e1, e2], undefined, {}, false);\n  },\n\n  toggleTagType({ termId, isTag }) {\n    const e1 = [termId, 'Tag', isTag ? '\"\"' : '*'];\n    return updateGraph(isTag ? [e1] : undefined, isTag ? undefined : [e1], {}, false);\n  },\n};\n\nexport const file = {\n  delete({ id }) {\n    return del(`/api/data/file/${id}`);\n  },\n  async deleteAudio({ termId, id }) {\n    try {\n      // unlink audio\n      const unlink = [termId, 'audio', id];\n      await updateGraph(undefined, [unlink], {}, false);\n    } catch (err) {\n      throw err;\n    }\n    await del(`/api/data/file/${id}`);\n  },\n  unlinkVisual({ termId, visual }) {\n    const unlink = visual.map(t => [termId, 'visual', t.uid]);\n    return updateGraph(undefined, unlink, {}, false);\n  },\n};\n\nexport const admin = {\n  searchAudio({ lang, text }) {\n    return get(`/api/pyadmin/search/audio/${decodeURIComponent(text)}`, { lang });\n  },\n  async restoreRemoteAudio({ term, userId }) {\n    const currentUrls = new Set(_.map(term.audio, t => t.url));\n    const data = await admin.searchAudio({ lang: term.lang, text: term.text });\n    const mp3 = data.mp3.filter(t => !currentUrls.has(t.url));\n    const set = [];\n    const now = new Date().toISOString();\n    for (let i = 0; i < mp3.length; i++) {\n      const id = `_:a${i + 1}`;\n      const url = new URL(mp3[i].url);\n      const src = url.hostname;\n      set.push(\n        [id, 'File', '\"\"'],\n        [id, 'created_at', `\"${now}\"^^<xs:dateTime>`],\n        [id, 'created_by', userId],\n        [id, 'url', `\"${mp3[i].url}\"`],\n        [id, 'source', `\"${src}\"`],\n        [term.uid, 'audio', id],\n      );\n    }\n    await updateGraph(set, undefined);\n  },\n};\n"],"sourceRoot":""}